<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
	<constant name="struts.enable.DynamicMethodInvocation" value="false" />
	<constant name="struts.devMode" value="true" />
	<constant name="struts.custom.i18n.resources" value="ApplicationResources" />
	<package name="GAS" extends="struts-default" namespace="/">
	    <interceptors>
			<interceptor name="loginInterceptor" class="gas.Interceptors.LoginInterceptor" />
			<interceptor-stack name="myInterceptorStack">
				<interceptor-ref name="loginInterceptor"/>
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		</interceptors>
	    
	    <global-results>
			<result name="login">index.jsp</result>
			<result name="loggato">welcome.jsp</result>
		</global-results>
		
	    <!-- Login & Logout -->
	    
		<action name="login" class="gas.Controller.Common.LoginAction">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
			<result name="success">welcome.jsp</result>
			<result name="error">login_retry.jsp</result>
			<result name="input">login_retry.jsp</result>
			<result name="ErroreDB">index.jsp</result>
		</action>
		<action name="logout" class="gas.Controller.Common.LogoutAction">		    
			<result>index.jsp</result>			
		</action>
		
		<!-- Azioni utente -->
		
		<action name="listaOrdiniAperti" class="gas.Controller.Utente.ListaOrdiniAperti">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">ordiniAperti.jsp</result>
		</action>
		<action name="listaProdottiAcquistabili" class="gas.Controller.Utente.ListaProdottiAcquistabili">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">prodottiAcquistabili.jsp</result>
		</action>
		<action name="mieiOrdini" class="gas.Controller.Utente.MieiOrdini">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">mieiOrdini.jsp</result>
		</action>
		<action name="dettaglioOrdine" class="gas.Controller.Utente.DettaglioOrdine">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">dettaglioOrdine.jsp</result>
		</action>
		<action name="aggiornaQuantita" class="gas.Controller.Utente.AggiornaQuantita">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">dettaglioOrdine.jsp</result>
		    <result name="input">dettaglioOrdine.jsp</result>
		    <result name="error">dettaglioOrdine.jsp</result>
		</action>
		<action name="nuovaDiscussione" class="gas.Controller.Utente.NuovaDiscussione">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result>nuovaDiscussione.jsp</result>
		</action>
		<action name="doInviaDiscussione" class="gas.Controller.Utente.DoInviaDiscussione">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		  	<result type="stream">
		  	    <param name="contentType">plain/text</param>
		  	    <param name="inputName">inputStream</param>
		  	</result>
		</action>
		<action name="sommarioDiscussioni" class="gas.Controller.Utente.SommarioDiscussioni">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result>sommarioDiscussioni.jsp</result>
		</action>
		<action name="showChat" class="gas.Controller.Utente.ShowChat">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result>showChat.jsp</result>
		</action>
		<action name="getDeltaDiscussioni" class="gas.Controller.Utente.GetDeltaDiscussioni">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		  	<result type="stream">
		  	    <param name="contentType">plain/text</param>
		  	    <param name="inputName">inputStream</param>
		  	</result>
		</action>
		<action name="confermaSchedaAcquisto" class="gas.Controller.Utente.ConfermaSchedaAcquisto">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">confermaSchedaAcquisto.jsp</result>
		    <result name="input">prodottiAcquistabili.jsp</result>
		    <result name="error">prodottiAcquistabili.jsp</result>
		</action>
		<action name="delega" class="gas.Controller.Utente.Delega">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">delega.jsp</result>
		    <result name="input">delega.jsp</result>
		    <result name="error">delega.jsp</result>
		</action>
		<action name="creaDelega" class="gas.Controller.Utente.CreaDelega">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">confermaDelega.jsp</result>
		    <result name="input">delega.jsp</result>
		    <result name="error">delega.jsp</result>
		</action>
		
		<!-- Azioni Responsabile -->
		
		<action name="statoOrdineResponsabile" class="gas.Controller.Responsabile.StatoOrdineResponsabile">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">statoOrdineResponsabile.jsp</result>
		</action>
		
		<action name="inviaNotificaChiusuraOrdine" class="gas.Controller.Responsabile.InviaNotificaChiusuraOrdine">
		    <interceptor-ref name="myInterceptorStack"></interceptor-ref>
		    <result name="success">statoOrdineResponsabile.jsp</result>
		</action>
		
		<!-- Altro -->
		
		<action name="*">
		    <result>{1}.jsp</result>
		</action>
	</package>
</struts>